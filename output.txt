============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.6.0 -- /Users/owainlewis/Projects/the-ai-engineer/ai-agents-from-scratch/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /Users/owainlewis/Projects/the-ai-engineer/ai-agents-from-scratch
configfile: pyproject.toml
plugins: asyncio-1.2.0, anyio-4.11.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 35 items

tests/test_agent.py::TestAgentSyncBasics::test_agent_initialization PASSED [  2%]
tests/test_agent.py::TestAgentSyncBasics::test_tool_registration_chainable PASSED [  5%]
tests/test_agent.py::TestAgentSyncBasics::test_multiple_tool_registration PASSED [  8%]
tests/test_agent.py::TestAgentSyncBasics::test_reset_clears_conversation_keeps_system_prompt PASSED [ 11%]
tests/test_agent.py::TestAgentSyncBasics::test_reset_keeps_tools PASSED  [ 14%]
tests/test_agent.py::TestAgentAsyncBasics::test_agent_initialization PASSED [ 17%]
tests/test_agent.py::TestAgentAsyncBasics::test_async_tool_detection PASSED [ 20%]
tests/test_agent.py::TestToolExecution::test_successful_tool_execution FAILED [ 22%]
tests/test_agent.py::TestToolExecution::test_tool_not_found_error PASSED [ 25%]
tests/test_agent.py::TestToolExecution::test_malformed_json_arguments_error PASSED [ 28%]
tests/test_agent.py::TestToolExecution::test_tool_raises_exception FAILED [ 31%]
tests/test_agent.py::TestToolExecution::test_async_tool_execution FAILED [ 34%]
tests/test_agent.py::TestParallelExecution::test_async_tools_run_in_parallel FAILED [ 37%]
tests/test_agent.py::TestParallelExecution::test_tool_errors_dont_break_parallel_execution FAILED [ 40%]
tests/test_agent.py::TestStateManagement::test_tool_schemas_generated_correctly PASSED [ 42%]
tests/test_agent.py::TestStateManagement::test_messages_list_accessible PASSED [ 45%]
tests/test_integration.py::TestRealAPIBasics::test_simple_chat_sync FAILED [ 48%]
tests/test_integration.py::TestRealAPIBasics::test_conversation_memory FAILED [ 51%]
tests/test_integration.py::TestRealAPIBasics::test_system_prompt_followed FAILED [ 54%]
tests/test_integration.py::TestRealAPIBasics::test_reset_clears_memory FAILED [ 57%]
tests/test_integration.py::TestRealAPIToolCalling::test_single_tool_call FAILED [ 60%]
tests/test_integration.py::TestRealAPIToolCalling::test_multiple_tool_calls FAILED [ 62%]
tests/test_integration.py::TestRealAPIToolCalling::test_tool_with_parameters FAILED [ 65%]
tests/test_integration.py::TestRealAPIStructuredOutput::test_structured_output_basic FAILED [ 68%]
tests/test_integration.py::TestRealAPIStructuredOutput::test_structured_output_list FAILED [ 71%]
tests/test_integration.py::TestRealAPIAsync::test_async_agent_basic FAILED [ 74%]
tests/test_integration.py::TestRealAPIAsync::test_async_agent_with_tools FAILED [ 77%]
tests/test_integration.py::TestRealAPIEdgeCases::test_empty_tool_result FAILED [ 80%]
tests/test_integration.py::TestRealAPIEdgeCases::test_long_tool_result FAILED [ 82%]
tests/test_tool.py::test_tool_creation_basics PASSED                     [ 85%]
tests/test_tool.py::test_tool_to_openai_format PASSED                    [ 88%]
tests/test_tool.py::test_tool_edge_cases PASSED                          [ 91%]
tests/test_tool.py::test_tool_decorator PASSED                           [ 94%]
tests/test_tool.py::test_tool_repr PASSED                                [ 97%]
tests/test_tool.py::test_multiple_parameters PASSED                      [100%]

=================================== FAILURES ===================================
_______________ TestToolExecution.test_successful_tool_execution _______________
tests/test_agent.py:150: in test_successful_tool_execution
    assert "Paris" in result
E   assert 'Paris' in '{"error": "Tool \'<Mock name=\'mock.name\' id=\'4430195952\'>\' not found"}'
_________________ TestToolExecution.test_tool_raises_exception _________________
tests/test_agent.py:200: in test_tool_raises_exception
    assert "ValueError" in result
E   assert 'ValueError' in '{"error": "Tool \'<Mock name=\'mock.name\' id=\'4430895424\'>\' not found"}'
_________________ TestToolExecution.test_async_tool_execution __________________
tests/test_agent.py:220: in test_async_tool_execution
    assert "Tokyo" in result
E   assert 'Tokyo' in '{"error": "Tool \'<Mock name=\'mock.name\' id=\'4430895760\'>\' not found"}'
____________ TestParallelExecution.test_async_tools_run_in_parallel ____________
tests/test_agent.py:265: in test_async_tools_run_in_parallel
    assert call_order.index("tool1_start") < call_order.index("tool1_end")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ValueError: 'tool1_start' is not in list
_____ TestParallelExecution.test_tool_errors_dont_break_parallel_execution _____
tests/test_agent.py:301: in test_tool_errors_dont_break_parallel_execution
    assert any("success" in msg.get("content", "") for msg in agent.messages)
E   assert False
E    +  where False = any(<generator object TestParallelExecution.test_tool_errors_dont_break_parallel_execution.<locals>.<genexpr> at 0x1082742e0>)
___________________ TestRealAPIBasics.test_simple_chat_sync ____________________
tests/test_integration.py:44: in test_simple_chat_sync
    response = agent.run("What is 2+2? Answer with just the number.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
__________________ TestRealAPIBasics.test_conversation_memory __________________
tests/test_integration.py:55: in test_conversation_memory
    response1 = agent.run("My favorite color is blue.")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
________________ TestRealAPIBasics.test_system_prompt_followed _________________
tests/test_integration.py:65: in test_system_prompt_followed
    response = agent.run("Hello!")
               ^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
__________________ TestRealAPIBasics.test_reset_clears_memory __________________
tests/test_integration.py:73: in test_reset_clears_memory
    agent.run("My name is Alice.")
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
_________________ TestRealAPIToolCalling.test_single_tool_call _________________
tests/test_integration.py:94: in test_single_tool_call
    response = agent.run("What's the temperature?")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
_______________ TestRealAPIToolCalling.test_multiple_tool_calls ________________
tests/test_integration.py:111: in test_multiple_tool_calls
    response = agent.run("What's the weather and temperature?")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
_______________ TestRealAPIToolCalling.test_tool_with_parameters _______________
tests/test_integration.py:138: in test_tool_with_parameters
    response = agent.run("What is 5 multiplied by 7?")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
___________ TestRealAPIStructuredOutput.test_structured_output_basic ___________
tests/test_integration.py:155: in test_structured_output_basic
    result = agent.run(
src/agent_sync.py:86: in run
    return self._structured_mode(response_format)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:101: in _structured_mode
    response = self.client.beta.chat.completions.parse(
.venv/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:183: in parse
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
___________ TestRealAPIStructuredOutput.test_structured_output_list ____________
tests/test_integration.py:175: in test_structured_output_list
    result = agent.run(
src/agent_sync.py:86: in run
    return self._structured_mode(response_format)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:101: in _structured_mode
    response = self.client.beta.chat.completions.parse(
.venv/lib/python3.13/site-packages/openai/resources/chat/completions/completions.py:183: in parse
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
___________________ TestRealAPIAsync.test_async_agent_basic ____________________
tests/test_integration.py:194: in test_async_agent_basic
    response = await agent.run("Say hello in one word.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent.py:87: in run
    return await self._agent_loop()
           ^^^^^^^^^^^^^^^^^^^^^^^^
src/agent.py:127: in _agent_loop
    response = await self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:2259: in create
    return await self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
_________________ TestRealAPIAsync.test_async_agent_with_tools _________________
tests/test_integration.py:209: in test_async_agent_with_tools
    response = await agent.run("What time is it?")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent.py:87: in run
    return await self._agent_loop()
           ^^^^^^^^^^^^^^^^^^^^^^^^
src/agent.py:127: in _agent_loop
    response = await self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:2259: in create
    return await self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1794: in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1594: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
_________________ TestRealAPIEdgeCases.test_empty_tool_result __________________
tests/test_integration.py:227: in test_empty_tool_result
    response = agent.run("Call the empty tool and tell me what happened.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
__________________ TestRealAPIEdgeCases.test_long_tool_result __________________
tests/test_integration.py:241: in test_long_tool_result
    response = agent.run("Call the long tool.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agent_sync.py:89: in run
    return self._agent_loop()
           ^^^^^^^^^^^^^^^^^^
src/agent_sync.py:125: in _agent_loop
    response = self.client.responses.create(
.venv/lib/python3.13/site-packages/openai/resources/responses/responses.py:828: in create
    return self._post(
.venv/lib/python3.13/site-packages/openai/_base_client.py:1259: in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/openai/_base_client.py:1047: in request
    raise self._make_status_error_from_response(err.response) from None
E   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
=========================== short test summary info ============================
FAILED tests/test_agent.py::TestToolExecution::test_successful_tool_execution - assert 'Paris' in '{"error": "Tool \'<Mock name=\'mock.name\' id=\'4430195952\'>\' not found"}'
FAILED tests/test_agent.py::TestToolExecution::test_tool_raises_exception - assert 'ValueError' in '{"error": "Tool \'<Mock name=\'mock.name\' id=\'4430895424\'>\' not found"}'
FAILED tests/test_agent.py::TestToolExecution::test_async_tool_execution - assert 'Tokyo' in '{"error": "Tool \'<Mock name=\'mock.name\' id=\'4430895760\'>\' not found"}'
FAILED tests/test_agent.py::TestParallelExecution::test_async_tools_run_in_parallel - ValueError: 'tool1_start' is not in list
FAILED tests/test_agent.py::TestParallelExecution::test_tool_errors_dont_break_parallel_execution - assert False
 +  where False = any(<generator object TestParallelExecution.test_tool_errors_dont_break_parallel_execution.<locals>.<genexpr> at 0x1082742e0>)
FAILED tests/test_integration.py::TestRealAPIBasics::test_simple_chat_sync - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIBasics::test_conversation_memory - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIBasics::test_system_prompt_followed - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIBasics::test_reset_clears_memory - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIToolCalling::test_single_tool_call - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIToolCalling::test_multiple_tool_calls - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIToolCalling::test_tool_with_parameters - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIStructuredOutput::test_structured_output_basic - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIStructuredOutput::test_structured_output_list - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIAsync::test_async_agent_basic - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIAsync::test_async_agent_with_tools - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIEdgeCases::test_empty_tool_result - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
FAILED tests/test_integration.py::TestRealAPIEdgeCases::test_long_tool_result - openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************29YA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
======================== 18 failed, 17 passed in 4.77s =========================
